{"version":3,"sources":["lookup/lookup.js","lookup/components.js","fillets/buttons.js","fillets/detail.js","fillets/list.js","fillets/form.js","fillets/components.js","Logo.png","App.js","index.js"],"names":["lookup","method","endpoint","callback","data","jsonData","JSON","stringify","xhr","XMLHttpRequest","url","responseType","open","setRequestHeader","onload","response","status","onerror","e","send","apiFilletList","username","ActionButton","fillet","action","handlePerformAction","theme","likeCount","like_count","className","display","type","handleActionBackendEvent","onClick","event","preventDefault","filletId","id","apiFilletAction","Fillet","handleRepost","text","filletTextClassName","is_repost","useState","currentFillet","setCurrentFillet","match","window","location","pathname","urlFilletId","groups","isDetail","newFillet","parent","href","FilletList","newFillets","setNewFillets","fillets","setFillets","filletsInit","setFilletsInit","filletsDidSet","setFilletsDidSet","useEffect","finalFillets","concat","length","alert","tempNewFillets","unshift","map","x","FilletCreateForm","textAreaRef","React","createRef","handleBackendUpdate","console","log","onSubmit","enteredText","current","value","required","ref","FilletsComponent","userCanPost","FilletDetailComponent","didLookup","setDidLookup","setFillet","handleBackendLookup","apiFilletDetail","App","src","Logo","width","height","alt","createElement","appElement","document","getElementById","ReactDOM","render","dataset","herringElement","querySelectorAll","forEach","container"],"mappings":"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","file":"static/js/main.34eaa3e6.chunk.js","sourcesContent":["function lookup(method, endpoint, callback, data) {\r\n    let jsonData\r\n    if (data) {\r\n      jsonData = JSON.stringify(data)\r\n    }\r\n    const xhr = new XMLHttpRequest()\r\n    const url = `http://localhost:8000/api${endpoint}`\r\n    xhr.responseType = 'json'\r\n    xhr.open(method, url)\r\n    xhr.setRequestHeader('Content-Type', 'application/json')\r\n    // const csrftoken = getCookie('csrftoken')\r\n    // if (csrftoken) {\r\n    //   xhr.setRequestHeader('X-CSRFToken', csrftoken)\r\n    //   xhr.setRequestHeader('HTTP_X_REQUESTED_WITH', 'XMLHttpRequest')\r\n    //   xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest')\r\n    // }\r\n    xhr.onload = () => {\r\n      callback(xhr.response, xhr.status)\r\n    }\r\n    xhr.onerror = (e) => {\r\n      callback({'message': 'Request failed'}, 400)\r\n    }\r\n    xhr.send(jsonData)\r\n  }\r\n  \r\n  // function getCookie(name) {\r\n  //   var cookieValue = null;\r\n  //   if (document.cookie && document.cookie !== '') {\r\n  //       var cookies = document.cookie.split(';');\r\n  //       for (var i = 0; i < cookies.length; i++) {\r\n  //           var cookie = cookies[i].trim();\r\n  //           // Does this cookie string begin with the name we want?\r\n  //           if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n  //               cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n  //               break;\r\n  //           }\r\n  //       }\r\n  //   }\r\n  //   return cookieValue;\r\n  // }\r\n\r\nexport default lookup","import lookup from './lookup'\r\n\r\nexport function apiFilletCreate(newFillet, callback) {\r\n  lookup('POST', '/fillets/create/', callback, {text: newFillet})\r\n}\r\n\r\nexport function apiFilletAction(filletId, action, callback) {\r\n  const data = {id: filletId, action: action}\r\n  lookup('POST', '/fillets/action/', callback, data)\r\n}\r\n\r\nexport function apiFilletList(username, callback) {\r\n  let endpoint = '/fillets'\r\n  if (username) {\r\n    endpoint += `/?username=${username}`\r\n  }\r\n  lookup('GET', endpoint, callback)\r\n}\r\n\r\nexport function apiFilletDetail(filletId, callback) {\r\n  lookup('GET', `/fillets/${filletId}/`, callback)\r\n}\r\n\r\nexport default apiFilletList\r\n","import React from 'react';\r\nimport {apiFilletAction} from '../lookup'\r\n\r\nfunction ActionButton({fillet, action, handlePerformAction, theme}) {\r\n    const likeCount = fillet.like_count ? fillet.like_count : 0\r\n    const className = `btn btn-outline-primary btn-sm ${theme}`\r\n    const display = action.type === 'like' ? `${likeCount} ${action.display}` : action.display\r\n\r\n    const handleActionBackendEvent = (response, status) => {\r\n      if ((status === 200 || status === 201) && handlePerformAction) {\r\n        handlePerformAction(response, status)\r\n      }\r\n    }\r\n    const handleClick = (event) => {\r\n      event.preventDefault()\r\n      apiFilletAction(fillet.id, action.type, handleActionBackendEvent)\r\n    }\r\n  \r\n    return <button className={className} onClick={handleClick}>{display}</button>\r\n  }\r\n\r\nexport default ActionButton","import {React, useState} from 'react'\r\nimport ActionButton from './buttons'\r\n\r\nfunction Fillet({fillet, handleRepost}) {\r\n    const text = fillet.text ? fillet.text : 'reposted'\r\n    const filletTextClassName = fillet.is_repost ? 'px-3 text-muted small' : 'px-3'\r\n    const [currentFillet, setCurrentFillet] = useState(fillet ? fillet : null)\r\n    const path = window.location.pathname\r\n    const match = path.match(/(?<filletId>\\d+)/)\r\n    const urlFilletId = match ? match.groups.filletId : 0\r\n    const isDetail = `${urlFilletId}` === `${fillet.id}`\r\n  \r\n    const handlePerformAction = (newFillet, status) => {\r\n      if (status === 200) {\r\n        setCurrentFillet(newFillet)\r\n      } else if (status === 201) {\r\n        handleRepost(newFillet)\r\n      }\r\n    }\r\n  \r\n    const handleLink = (event) => {\r\n      event.preventDefault()\r\n      window.location.href = `/${fillet.id}`\r\n    }\r\n\r\n    return <div className='col-12 col-md-10 mx-auto border rounded py-2 mb-4'>\r\n      <div>\r\n        <p className={filletTextClassName}>\r\n          <i>{fillet.id}:</i> {text}\r\n        </p>\r\n        {fillet.is_repost &&\r\n        <div className='col-9'><Fillet fillet={currentFillet.parent} handleRepost={handleRepost}/></div>}\r\n      </div>\r\n      {currentFillet && <div className='btn btn-group'>\r\n        <ActionButton\r\n          fillet={currentFillet}\r\n          action={{type: 'like', display: 'Likes'}}\r\n          handlePerformAction={handlePerformAction}\r\n          theme='btn-dark'\r\n        />\r\n        <ActionButton\r\n          fillet={currentFillet}\r\n          action={{type: 'unlike', display: 'Unlike'}}\r\n          handlePerformAction={handlePerformAction}\r\n          theme='btn-dark'\r\n        />\r\n        <ActionButton\r\n          fillet={currentFillet}\r\n          action={{type: 'repost', display: 'Repost'}}\r\n          handlePerformAction={handlePerformAction}\r\n          theme='btn-light'\r\n        />\r\n        {!isDetail && <button onClick={handleLink} className='btn btn-outline-primary btn-sm btn-light'>View</button>}\r\n      </div>}\r\n    </div>\r\n  }\r\n\r\nexport default Fillet","import React, {useEffect, useState} from 'react'\r\nimport {apiFilletList} from '../lookup'\r\nimport Fillet from './detail'\r\n\r\nfunction FilletList({newFillets, setNewFillets, username}) {\r\n    const [fillets, setFillets] = useState([])\r\n    const [filletsInit, setFilletsInit] = useState(newFillets ? newFillets : [])\r\n    const [filletsDidSet, setFilletsDidSet] = useState(false)\r\n    \r\n    useEffect(() => {\r\n      let finalFillets = [...newFillets].concat(filletsInit)\r\n      if (finalFillets.length !== fillets.length) {\r\n        setFillets(finalFillets)\r\n      }\r\n    }, [fillets, newFillets, filletsInit])\r\n  \r\n    useEffect(() => {\r\n      if (!filletsDidSet) {\r\n        const handleFilletListLookup = (response, status) => {\r\n          if (status === 200)\r\n          {\r\n            setFilletsInit(response)\r\n            setFilletsDidSet(true)\r\n          } else {\r\n            alert('You have error :-D')\r\n          }\r\n        }\r\n        apiFilletList(username, handleFilletListLookup)\r\n      }\r\n    }, [filletsInit, filletsDidSet, username])\r\n  \r\n    const handleRepost = (newFillet) => {\r\n      const tempNewFillets = [...newFillets]\r\n      tempNewFillets.unshift(newFillet)\r\n      setNewFillets(tempNewFillets)\r\n    }\r\n  \r\n    return (\r\n      <div> \r\n          {fillets.map((x) => {\r\n            return <Fillet \r\n            fillet={x}\r\n            handleRepost={handleRepost}\r\n            key={x.id} />\r\n          })}\r\n      </div>\r\n    )\r\n  }\r\n  \r\n\r\nexport default FilletList","import React from 'react'\r\nimport {apiFilletCreate} from '../lookup'\r\n\r\nfunction FilletCreateForm({newFillets, setNewFillets}) {\r\n    const textAreaRef = React.createRef()\r\n  \r\n    const handleSubmit = (event) => {\r\n      // api request\r\n      event.preventDefault()\r\n      const enteredText = textAreaRef.current.value\r\n      textAreaRef.current.value = ''\r\n      apiFilletCreate(enteredText, handleBackendUpdate)\r\n    }\r\n  \r\n    const handleBackendUpdate = (response, status) => {\r\n      console.log(response, status)\r\n      // api response handler\r\n      if (status === 201) {\r\n        const tempNewFillets = [...newFillets]\r\n        tempNewFillets.unshift(response)\r\n        setNewFillets(tempNewFillets)\r\n      } else {\r\n        alert('you have error :-D')\r\n      }\r\n    }\r\n  \r\n    return (\r\n      <form onSubmit={handleSubmit}>\r\n        <textarea className='form-control' required={true} ref={textAreaRef}>\r\n        </textarea>\r\n        <button type='submit' className='btn btn-outline-primary btn-sm my-3 btn-dark'>Post</button>\r\n      </form>\r\n    )\r\n  }\r\n\r\nexport default FilletCreateForm","import {React, useEffect, useState} from 'react'\r\nimport FilletList from './list'\r\nimport FilletCreateForm from './form'\r\nimport {apiFilletDetail} from '../lookup'\r\nimport Fillet from './detail'\r\n\r\n\r\nexport function FilletsComponent({username, userCanPost}) {\r\n  const [newFillets, setNewFillets] = useState([])\r\n  userCanPost = userCanPost === 'true' ? true : false\r\n\r\n  return (\r\n  <div className='col-12 mb-3'>\r\n      {userCanPost &&\r\n      <FilletCreateForm newFillets={newFillets} setNewFillets={setNewFillets} />}\r\n      <FilletList newFillets={newFillets} setNewFillets={setNewFillets} username={username} />\r\n  </div>\r\n  )\r\n}\r\n\r\nexport function FilletDetailComponent({filletId}) {\r\n  const [didLookup, setDidLookup] = useState(false)\r\n  const [fillet, setFillet] = useState(null)\r\n\r\n  const handleBackendLookup = (response, status) => {\r\n    if (status === 200) {\r\n      setFillet(response)\r\n    } else {\r\n      alert('Error: could not find fillet.')\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (didLookup === false) {\r\n      apiFilletDetail(filletId, handleBackendLookup)\r\n      setDidLookup(true)\r\n    }\r\n\r\n  }, [didLookup, setDidLookup, filletId])\r\n\r\n  return fillet === null ? null : <Fillet fillet={fillet} handleRepost={() => {}}/>\r\n}\r\n\r\nexport default FilletsComponent","export default __webpack_public_path__ + \"static/media/Logo.efa2b0d2.png\";","import './App.css';\nimport {FilletsComponent} from './fillets';\nimport Logo from './Logo.png';\n\nfunction App({username, userCanPost}) {\n  return (\n  <>\n    <div className=\"d-flex justify-content-center py-4\">\n      <img src={Logo} width=\"180\" height=\"60\" alt=\"\"/>\n    </div>\n    <FilletsComponent username={username} userCanPost={userCanPost} />\n  </>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport {FilletsComponent, FilletDetailComponent} from './fillets'\n\n\nconst e = React.createElement\n\n\nconst appElement = document.getElementById('root')\nif (appElement) {\n  ReactDOM.render(e(App, appElement.dataset), appElement)\n}\n\nconst herringElement = document.getElementById('Herring')\nif (herringElement) {\n  ReactDOM.render(\n    e(FilletsComponent, herringElement.dataset), herringElement)\n}\n\nconst filletDetailElements = document.querySelectorAll('.herring-detail')\nfilletDetailElements.forEach(container => {\n  ReactDOM.render(\n    e(FilletDetailComponent, container.dataset), container)\n})\n"],"sourceRoot":""}