{"version":3,"sources":["lookup/lookup.js","lookup/components.js","fillets/buttons.js","profiles/components.js","profiles/utils.js","profiles/badge.js","fillets/detail.js","fillets/list.js","fillets/feed.js","fillets/form.js","fillets/components.js","index.js"],"names":["lookup","method","endpoint","callback","data","jsonData","JSON","stringify","xhr","XMLHttpRequest","url","responseType","open","setRequestHeader","csrftoken","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","getCookie","onload","status","response","detail","window","location","href","indexOf","onerror","e","send","apiFilletList","username","nextUrl","replace","apiFilletFeed","ActionButton","fillet","action","handlePerformAction","theme","likeCount","like_count","className","display","type","handleActionBackendEvent","onClick","event","preventDefault","filletId","id","apiFilletAction","UserLink","children","UserPicture","user","UserDisplay","includeFullName","nameDisplay","first_name","last_name","DisplayCount","numeral","format","ProfileBadge","didFollowToggle","profileLoading","currentButtonText","is_followed","country","follower_count","following_count","bio","ProfileBadgeComponent","useState","didLookup","setDidLookup","profile","setProfile","setProfileLoading","handleBackendLookup","useEffect","apiProfileDetail","actionVerb","toLowerCase","apiProfileFollowToggle","console","log","Fillet","handleRepost","text","filletDisplayPostfix","currentFillet","setCurrentFillet","match","pathname","urlFilletId","groups","isDetail","newFillet","is_repost","parent","FilletList","newFillets","setNewFillets","fillets","setFillets","filletsInit","setFilletsInit","filletsDidSet","setFilletsDidSet","setNextUrl","finalFillets","concat","next","results","alert","tempNewFillets","unshift","map","x","FilletFeedList","FilletCreateForm","textAreaRef","React","createRef","handleBackendUpdate","onSubmit","enteredText","current","value","required","ref","FilletsComponent","userCanPost","FilletDetailComponent","setFillet","apiFilletDetail","createElement","herringElement","getElementById","ReactDOM","render","dataset","herringFeedElement","querySelectorAll","forEach","container"],"mappings":"uMAiDeA,MAjCf,SAAgBC,EAAQC,EAAUC,EAAUC,GACxC,IAAIC,EACAD,IACFC,EAAWC,KAAKC,UAAUH,IAE5B,IAAMI,EAAM,IAAIC,eACVC,EAAG,mCAA+BR,GACxCM,EAAIG,aAAe,OACnBH,EAAII,KAAKX,EAAQS,GACjBF,EAAIK,iBAAiB,eAAgB,oBACrC,IAAMC,EA1BV,SAAmBC,GACjB,IAAIC,EAAc,KAClB,GAAIC,SAASC,QAA8B,KAApBD,SAASC,OAE5B,IADA,IAAIC,EAAUF,SAASC,OAAOE,MAAM,KAC3BC,EAAI,EAAGA,EAAIF,EAAQG,OAAQD,IAAK,CACrC,IAAIH,EAASC,EAAQE,GAAGE,OAExB,GAAIL,EAAOM,UAAU,EAAGT,EAAKO,OAAS,KAAQP,EAAO,IAAM,CACvDC,EAAcS,mBAAmBP,EAAOM,UAAUT,EAAKO,OAAS,IAChE,OAIZ,OAAON,EAaaU,CAAU,aAC5BlB,EAAIK,iBAAiB,cAAeC,GAGpCN,EAAIK,iBAAiB,mBAAoB,kBAEzCL,EAAImB,OAAS,WACQ,MAAfnB,EAAIoB,QACsB,kDAAxBpB,EAAIqB,SAASC,SACgC,IAA3CC,OAAOC,SAASC,KAAKC,QAAQ,WAC/BH,OAAOC,SAASC,KAAO,iCAK7B9B,EAASK,EAAIqB,SAAUrB,EAAIoB,SAE7BpB,EAAI2B,QAAU,SAACC,GACbjC,EAAS,CAAC,QAAW,kBAAmB,MAE1CK,EAAI6B,KAAKhC,ICnCN,SAASiC,EAAcC,EAAUpC,EAAUqC,GAChD,IAAItC,EAAW,WACXqC,IACFrC,GAAQ,qBAAkBqC,IAExBC,IACFtC,EAAWsC,EAAQC,QAAQ,4BAA6B,KAE1DzC,EAAO,MAAOE,EAAUC,GAGnB,SAASuC,EAAcvC,EAAUqC,GACtC,IAAItC,EAAW,gBACXsC,IACFtC,EAAWsC,EAAQC,QAAQ,4BAA6B,KAE1DzC,EAAO,MAAOE,EAAUC,GAgBXmC,I,cCtBAK,MAlBf,YAAqE,IAA9CC,EAA6C,EAA7CA,OAAQC,EAAqC,EAArCA,OAAQC,EAA6B,EAA7BA,oBAAqBC,EAAQ,EAARA,MAClDC,EAAYJ,EAAOK,WAAaL,EAAOK,WAAa,EACpDC,EAAS,yCAAqCH,GAC9CI,EAA0B,SAAhBN,EAAOO,KAAP,UAA4BJ,EAA5B,YAAyCH,EAAOM,SAAYN,EAAOM,QAE7EE,EAA2B,SAACxB,EAAUD,GAC1B,MAAXA,GAA6B,MAAXA,IAAmBkB,GACxCA,EAAoBjB,EAAUD,IAQlC,OAAO,wBAAQsB,UAAWA,EAAWI,QALjB,SAACC,GACnBA,EAAMC,iBDRL,SAAyBC,EAAUZ,EAAQ1C,GAEhDH,EAAO,OAAQ,mBAAoBG,EADtB,CAACuD,GAAID,EAAUZ,OAAQA,ICQhCc,CAAgBf,EAAOc,GAAIb,EAAOO,KAAMC,IAGnC,SAAqDF,KChBhE,SAASS,EAAT,GAAyC,IAAtBrB,EAAqB,EAArBA,SAAUsB,EAAW,EAAXA,SAKzB,OAAO,sBAAMP,QAJU,SAACC,GACtBA,EAAMC,iBACNzB,OAAOC,SAASC,KAAhB,oBAAoCM,IAEAW,UAAU,UAAzC,SAAoDW,IAGxD,SAASC,EAAT,GAA8B,IAARC,EAAO,EAAPA,KACzB,OACI,cAACH,EAAD,CAAUrB,SAAUwB,EAAKxB,SAAzB,SACA,sBAAMW,UAAU,gBAAhB,SAAiCa,EAAKxB,SAAS,OAKhD,SAASyB,EAAT,GAA+C,IAAzBD,EAAwB,EAAxBA,KAAME,EAAkB,EAAlBA,gBACzBC,EAAW,UAAMH,EAAKI,WAAX,YAAyBJ,EAAKK,WAC/C,OACI,qCACCH,GAAmC,MAAhBC,GAAuB,qCAAGA,EAAH,UAC3C,eAACN,EAAD,CAAUrB,SAAUwB,EAAKxB,SAAzB,cACK,4BAAIwB,EAAKxB,iBAMPyB,I,gBC3BR,SAASK,EAAT,GAA8C,IAAvBnB,EAAsB,EAAtBA,UAAWW,EAAW,EAAXA,SACrC,OAAO,sBAAMX,UAAWA,EAAjB,SAA6BoB,IAAQT,GAAUU,OAAO,QCGjE,SAASC,EAAT,GAAgE,IAAzCT,EAAwC,EAAxCA,KAAMU,EAAkC,EAAlCA,gBAAiBC,EAAiB,EAAjBA,eACtCC,EAAqBZ,GAAQA,EAAKa,YAAe,WAAa,SAClED,EAAoBD,EAAiB,aAAeC,EAQpD,OAAOZ,EACH,gCACI,8BAAG,cAACD,EAAD,CAAaC,KAAMA,IAAtB,OACA,cAACC,EAAD,CAAaD,KAAMA,EAAME,iBAAe,OACxC,mBAAGf,UAAU,QAAb,SAAsBa,EAAKc,UAC3B,oBAAG3B,UAAU,QAAb,wBAAgC,cAACmB,EAAD,UAAeN,EAAKe,oBACpD,oBAAG5B,UAAU,QAAb,wBAAgC,cAACmB,EAAD,UAAeN,EAAKgB,qBACpD,mBAAG7B,UAAU,QAAb,SAAsBa,EAAKiB,MAC3B,wBAAQ1B,QAfW,SAACC,GACxBA,EAAMC,iBACFiB,IAAoBC,GACpBD,EAAgBE,IAYqBzB,UAAU,sBAA/C,SACKyB,OAGT,KAGD,SAASM,EAAT,GAA4C,IAAZ1C,EAAW,EAAXA,SAAW,EACZ2C,oBAAS,GADG,mBACvCC,EADuC,KAC5BC,EAD4B,OAEhBF,mBAAS,MAFO,mBAEvCG,EAFuC,KAE9BC,EAF8B,OAGFJ,oBAAS,GAHP,mBAGvCR,EAHuC,KAGvBa,EAHuB,KAKxCC,EAAsB,SAAC3D,EAAUD,GACtB,MAAXA,GACF0D,EAAWzD,IAIf4D,qBAAU,YACU,IAAdN,KJVH,SAA0B5C,EAAUpC,GACzCH,EAAO,MAAD,oBAAqBuC,EAArB,KAAkCpC,GIUlCuF,CAAiBnD,EAAUiD,GAC3BJ,GAAa,MAGd,CAACD,EAAWC,EAAc7C,IAa7B,OAAQ4C,EAA2BE,EAC/B,cAACb,EAAD,CAAcT,KAAMsB,EAASZ,gBAZT,SAACkB,GACrBJ,GAAkB,GJdnB,SAAgChD,EAAUpC,EAAU0C,GACzD,IAAMzC,EAAO,CAACyC,OAAQA,EAAO+C,eAC7B5F,EAAO,OAAD,oBAAsBuC,EAAtB,YAA0CpC,EAAUC,GIapDyF,CAAuBtD,GAAU,SAACV,EAAUD,GACzB,MAAXA,IACAkE,QAAQC,IAAIlE,EAAUD,GACtB0D,EAAWzD,IAEf0D,GAAkB,KACnBI,IAI4DjB,eAAgBA,IAC7E,KAFc,aCATsB,MA1Df,SAASA,EAAT,GAAyC,IAAxBpD,EAAuB,EAAvBA,OAAQqD,EAAe,EAAfA,aACfC,EAAOtD,EAAOsD,KAAOtD,EAAOsD,KAAO,GACnCC,EAAwBvD,EAAOsD,KAAO,SAAW,aAFnB,EAGMhB,mBAAStC,GAAkB,MAHjC,mBAG7BwD,EAH6B,KAGdC,EAHc,KAK9BC,EADOvE,OAAOC,SAASuE,SACVD,MAAL,YAAW,WAAX,eACRE,EAAcF,EAAQA,EAAMG,OAAOhD,SAAW,EAC9CiD,EAAW,UAAGF,KAAH,UAAwB5D,EAAOc,IAE1CZ,EAAsB,SAAC6D,EAAW/E,GACvB,MAAXA,EACFyE,EAAiBM,GACG,MAAX/E,GACTqE,EAAaU,IASjB,OACE,sBAAKzD,UAAU,gCAAf,UACE,sBAAKA,UAAU,wBAAf,UACE,cAACY,EAAD,CAAaC,KAAMnB,EAAOmB,OAD5B,OAEE,cAACC,EAAD,CAAaD,KAAMnB,EAAOmB,KAAME,iBAAe,IAAgBkC,KAE/C,KAAhBvD,EAAOsD,MAAe,mBAAGhD,UAAU,iBAAb,SACtB,4BAAIgD,MAELtD,EAAOgE,WACR,qBAAK1D,UAAU,SAAf,SAAwB,cAAC8C,EAAD,CAAQpD,OAAQwD,EAAcS,OAAQZ,aAAcA,MAC3EG,GAAiB,sBAAKlD,UAAU,gBAAf,UAChB,cAAC,EAAD,CACEN,OAAQwD,EACRvD,OAAQ,CAACO,KAAM,OAAQD,QAAS,SAChCL,oBAAqBA,EACrBC,MAAM,aAER,cAAC,EAAD,CACEH,OAAQwD,EACRvD,OAAQ,CAACO,KAAM,SAAUD,QAAS,UAClCL,oBAAqBA,EACrBC,MAAM,aAER,cAAC,EAAD,CACEH,OAAQwD,EACRvD,OAAQ,CAACO,KAAM,SAAUD,QAAS,UAClCL,oBAAqBA,EACrBC,MAAM,eAEN2D,GAAY,wBAAQpD,QAnCT,SAACC,GAClBA,EAAMC,iBACNzB,OAAOC,SAASC,KAAhB,WAA2BW,EAAOc,KAiCaR,UAAU,2CAAvC,yBCqBT4D,MAzEf,YAA4D,IAAvCC,EAAsC,EAAtCA,WAAYC,EAA0B,EAA1BA,cAAezE,EAAW,EAAXA,SAAW,EACzB2C,mBAAS,IADgB,mBAChD+B,EADgD,KACvCC,EADuC,OAEjBhC,mBAAS6B,GAA0B,IAFlB,mBAEhDI,EAFgD,KAEnCC,EAFmC,OAGblC,oBAAS,GAHI,mBAGhDmC,EAHgD,KAGjCC,EAHiC,OAIzBpC,mBAAS,MAJgB,mBAIhD1C,EAJgD,KAIvC+E,EAJuC,KAMvD9B,qBAAU,WACR,IAAI+B,EAAe,YAAIT,GAAYU,OAAON,GACtCK,EAAalG,SAAW2F,EAAQ3F,QAClC4F,EAAWM,KAEZ,CAACP,EAASF,EAAYI,IAEzB1B,qBAAU,WACR,IAAK4B,EAAe,CAWlB/E,EAAcC,GAViB,SAACV,EAAUD,GACzB,MAAXA,GAEF2F,EAAW1F,EAAS6F,MACpBN,EAAevF,EAAS8F,SACxBL,GAAiB,IAEjBM,MAAM,4BAKX,CAACT,EAAaE,EAAe9E,IAEhC,IAAM0D,EAAe,SAACU,GACpB,IAAMkB,EAAc,YAAOd,GAC3Bc,EAAeC,QAAQnB,GACvBK,EAAca,IAqBhB,OACE,qCACGZ,EAAQc,KAAI,SAACC,GACZ,OAAO,qCAAE,cAAC,EAAD,CACTpF,OAAQoF,EACR/B,aAAcA,GACT+B,EAAEtE,IACP,6BAEW,OAAZlB,GACD,wBACAc,QA7BmB,SAACC,GAEtB,GADAA,EAAMC,iBACU,OAAZhB,EAAkB,CAYpBF,EAAcC,GAXgB,SAACV,EAAUD,GACvC,GAAe,MAAXA,EACJ,CACE2F,EAAW1F,EAAS6F,MACpB,IAAMX,EAAa,YAAIE,GAASQ,OAAO5F,EAAS8F,SAChDT,EAAWH,GACXK,EAAeL,QAEfa,MAAM,wBAGqCpF,KAgB/CU,UAAU,0CAFV,sBCQO+E,MAvER,YAAgE,IAAvClB,EAAsC,EAAtCA,WAAYC,EAA0B,EAA1BA,cAAezE,EAAW,EAAXA,SAAW,EACpC2C,mBAAS,IAD2B,mBAC3D+B,EAD2D,KAClDC,EADkD,OAE5BhC,mBAAS6B,GAA0B,IAFP,mBAE3DI,EAF2D,KAE9CC,EAF8C,OAGxBlC,oBAAS,GAHe,mBAG3DmC,EAH2D,KAG5CC,EAH4C,OAIpCpC,mBAAS,MAJ2B,mBAI3D1C,EAJ2D,KAIlD+E,EAJkD,KAMlE9B,qBAAU,WACR,IAAI+B,EAAe,YAAIT,GAAYU,OAAON,GACtCK,EAAalG,SAAW2F,EAAQ3F,QAClC4F,EAAWM,KAEZ,CAACP,EAASF,EAAYI,IAEzB1B,qBAAU,WACR,IAAK4B,EAAe,CASlB3E,GAR+B,SAACb,EAAUD,GACzB,MAAXA,IAEF2F,EAAW1F,EAAS6F,MACpBN,EAAevF,EAAS8F,SACxBL,GAAiB,UAKtB,CAACH,EAAaE,EAAe9E,IAEhC,IAAM0D,EAAe,SAACU,GACpB,IAAMkB,EAAc,YAAOd,GAC3Bc,EAAeC,QAAQnB,GACvBK,EAAca,IAqBhB,OACE,qCACGZ,EAAQc,KAAI,SAACC,GACZ,OAAO,qCAAE,cAAC,EAAD,CACTpF,OAAQoF,EACR/B,aAAcA,GACT+B,EAAEtE,IACP,6BAEW,OAAZlB,GACD,wBACAc,QA7BmB,SAACC,GAEtB,GADAA,EAAMC,iBACU,OAAZhB,EAAkB,CAYpBE,GAX8B,SAACb,EAAUD,GACvC,GAAe,MAAXA,EACJ,CACE2F,EAAW1F,EAAS6F,MACpB,IAAMX,EAAa,YAAIE,GAASQ,OAAO5F,EAAS8F,SAChDT,EAAWH,GACXK,EAAeL,QAEfa,MAAM,wBAG2BpF,KAgBrCU,UAAU,0CAFV,sBC9BOgF,MAhCf,YAAwD,IAA7BnB,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,cAC7BmB,EAAcC,IAAMC,YAUpBC,EAAsB,SAACzG,EAAUD,GAGrC,GAFAkE,QAAQC,IAAIlE,EAAUD,GAEP,MAAXA,EAAgB,CAClB,IAAMiG,EAAc,YAAOd,GAC3Bc,EAAeC,QAAQjG,GACvBmF,EAAca,QAEdD,MAAM,uBAIV,OACE,uBAAMW,SArBa,SAAChF,GAEpBA,EAAMC,iBACN,IAAMgF,EAAcL,EAAYM,QAAQC,MACxCP,EAAYM,QAAQC,MAAQ,GRPhC1I,EAAO,OAAQ,mBQQkBsI,ERRY,CAACpC,KQQ1BsC,KAgBhB,UACE,0BAAUtF,UAAU,eAAeyF,UAAU,EAAMC,IAAKT,IAExD,wBAAQ/E,KAAK,SAASF,UAAU,+CAAhC,sBCtBD,SAAS2F,EAAT,GAAoD,IAAzBtG,EAAwB,EAAxBA,SAAUuG,EAAc,EAAdA,YAAc,EACpB5D,mBAAS,IADW,mBACjD6B,EADiD,KACrCC,EADqC,KAIxD,OAFA8B,EAA8B,SAAhBA,EAGd,sBAAK5F,UAAU,cAAf,UACK4F,GACD,cAAC,EAAD,CAAkB/B,WAAYA,EAAYC,cAAeA,IACzD,cAAC,EAAD,CAAYD,WAAYA,EAAYC,cAAeA,EAAezE,SAAUA,OAkB3E,SAASwG,EAAT,GAA4C,IAAZtF,EAAW,EAAXA,SAAW,EACdyB,oBAAS,GADK,mBACzCC,EADyC,KAC9BC,EAD8B,OAEpBF,mBAAS,MAFW,mBAEzCtC,EAFyC,KAEjCoG,EAFiC,KAI1CxD,EAAsB,SAAC3D,EAAUD,GACtB,MAAXA,EACFoH,EAAUnH,GAEV+F,MAAM,kCAYV,OARAnC,qBAAU,YACU,IAAdN,KTjBD,SAAyB1B,EAAUtD,GACxCH,EAAO,MAAD,mBAAoByD,EAApB,KAAiCtD,GSiBnC8I,CAAgBxF,EAAU+B,GAC1BJ,GAAa,MAGd,CAACD,EAAWC,EAAc3B,IAEX,OAAXb,EAAkB,KAAO,cAAC,EAAD,CAAQA,OAAQA,EAAQqD,aAAc,eAGzD4C,ICnDTzG,EAAIgG,IAAMc,cAEVC,EAAiBlI,SAASmI,eAAe,WAC3CD,GACFE,IAASC,OACPlH,EAAEyG,EAAkBM,EAAeI,SAAUJ,GAGjD,IAAMK,EAAqBvI,SAASmI,eAAe,gBAC/CI,GACFH,IAASC,OACPlH,GDIG,YAAuD,IAAzBG,EAAwB,EAAxBA,SAAUuG,EAAc,EAAdA,YAAc,EACvB5D,mBAAS,IADc,mBACpD6B,EADoD,KACxCC,EADwC,KAI3D,OAFA8B,EAA8B,SAAhBA,EAGd,sBAAK5F,UAAU,cAAf,UACK4F,GACD,cAAC,EAAD,CAAkB/B,WAAYA,EAAYC,cAAeA,IACzD,cAAC,EAAD,CAAgBD,WAAYA,EAAYC,cAAeA,EAAezE,SAAUA,SCZ3DiH,EAAmBD,SAAUC,GAG3BvI,SAASwI,iBAAiB,mBAClCC,SAAQ,SAAAC,GAC3BN,IAASC,OACPlH,EAAE2G,EAAuBY,EAAUJ,SAAUI,MAGpB1I,SAASwI,iBAAiB,0BAClCC,SAAQ,SAAAC,GAC3BN,IAASC,OACPlH,EAAE6C,EAAuB0E,EAAUJ,SAAUI,Q","file":"static/js/main.b99828c5.chunk.js","sourcesContent":["function getCookie(name) {\r\n  var cookieValue = null;\r\n  if (document.cookie && document.cookie !== '') {\r\n      var cookies = document.cookie.split(';');\r\n      for (var i = 0; i < cookies.length; i++) {\r\n          var cookie = cookies[i].trim();\r\n          // Does this cookie string begin with the name we want?\r\n          if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n              cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n              break;\r\n          }\r\n      }\r\n  }\r\n  return cookieValue;\r\n}\r\n\r\nfunction lookup(method, endpoint, callback, data) {\r\n    let jsonData\r\n    if (data) {\r\n      jsonData = JSON.stringify(data)\r\n    }\r\n    const xhr = new XMLHttpRequest()\r\n    const url = `http://localhost:8000/api${endpoint}`\r\n    xhr.responseType = 'json'\r\n    xhr.open(method, url)\r\n    xhr.setRequestHeader('Content-Type', 'application/json')\r\n    const csrftoken = getCookie('csrftoken')\r\n    xhr.setRequestHeader('X-CSRFToken', csrftoken)\r\n    // const sessionid = getCookie('sessionid')\r\n    // xhr.setRequestHeader('X-SessionID', sessionid)\r\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest')\r\n    // xhr.withCredentials = true\r\n    xhr.onload = () => {\r\n      if (xhr.status === 403) {\r\n        if (xhr.response.detail === 'Authentication credentials were not provided.') {\r\n          if (window.location.href.indexOf('login') === -1) {\r\n            window.location.href = '/login?showLoginRequired=true'\r\n          }\r\n        }\r\n      }\r\n\r\n      callback(xhr.response, xhr.status)\r\n    }\r\n    xhr.onerror = (e) => {\r\n      callback({'message': 'Request failed'}, 400)\r\n    }\r\n    xhr.send(jsonData)\r\n  }\r\n\r\nexport default lookup","import lookup from './lookup'\r\n\r\nexport function apiFilletCreate(newFillet, callback) {\r\n  lookup('POST', '/fillets/create/', callback, {text: newFillet})\r\n}\r\n\r\nexport function apiFilletAction(filletId, action, callback) {\r\n  const data = {id: filletId, action: action}\r\n  lookup('POST', '/fillets/action/', callback, data)\r\n}\r\n\r\nexport function apiFilletList(username, callback, nextUrl) {\r\n  let endpoint = '/fillets'\r\n  if (username) {\r\n    endpoint += `/?username=${username}`\r\n  }\r\n  if (nextUrl) {\r\n    endpoint = nextUrl.replace('http://localhost:8000/api', '')\r\n  }\r\n  lookup('GET', endpoint, callback)\r\n}\r\n\r\nexport function apiFilletFeed(callback, nextUrl) {\r\n  let endpoint = '/fillets/feed'\r\n  if (nextUrl) {\r\n    endpoint = nextUrl.replace('http://localhost:8000/api', '')\r\n  }\r\n  lookup('GET', endpoint, callback)\r\n}\r\n\r\nexport function apiFilletDetail(filletId, callback) {\r\n  lookup('GET', `/fillets/${filletId}/`, callback)\r\n}\r\n\r\nexport function apiProfileDetail(username, callback) {\r\n  lookup('GET', `/profiles/${username}/`, callback)\r\n}\r\n\r\nexport function apiProfileFollowToggle(username, callback, action) {\r\n  const data = {action: action.toLowerCase()}\r\n  lookup('POST', `/profiles/${username}/follow/`, callback, data)\r\n}\r\n\r\nexport default apiFilletList\r\n","import React from 'react';\r\nimport {apiFilletAction} from '../lookup'\r\n\r\nfunction ActionButton({fillet, action, handlePerformAction, theme}) {\r\n    const likeCount = fillet.like_count ? fillet.like_count : 0\r\n    const className = `btn btn-outline-primary btn-sm ${theme}`\r\n    const display = action.type === 'like' ? `${likeCount} ${action.display}` : action.display\r\n\r\n    const handleActionBackendEvent = (response, status) => {\r\n      if ((status === 200 || status === 201) && handlePerformAction) {\r\n        handlePerformAction(response, status)\r\n      }\r\n    }\r\n    const handleClick = (event) => {\r\n      event.preventDefault()\r\n      apiFilletAction(fillet.id, action.type, handleActionBackendEvent)\r\n    }\r\n  \r\n    return <button className={className} onClick={handleClick}>{display}</button>\r\n  }\r\n\r\nexport default ActionButton","import {React} from 'react'\r\n\r\nfunction UserLink({username, children}) {\r\n    const handleUserLink = (event) => {\r\n      event.preventDefault()\r\n      window.location.href = `/profiles/${username}`\r\n    }\r\n    return <span onClick={handleUserLink} className='pointer'>{children}</span>\r\n  }\r\n  \r\nexport function UserPicture({user}) {\r\n    return (\r\n        <UserLink username={user.username}>\r\n        <span className='badge bg-dark'>{user.username[0]}</span>\r\n        </UserLink>\r\n    )\r\n}\r\n\r\nexport function UserDisplay({user, includeFullName}) {\r\n    const nameDisplay = `${user.first_name} ${user.last_name}`\r\n    return (\r\n        <>\r\n        {includeFullName && nameDisplay !== ' ' && <>{nameDisplay}&nbsp;</>}\r\n        <UserLink username={user.username}>\r\n            @<b>{user.username}</b>\r\n        </UserLink>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default UserDisplay","import React from 'react'\r\nimport numeral from 'numeral'\r\n\r\nexport function DisplayCount({className, children}) {\r\n    return <span className={className}>{numeral(children).format('0a')}</span>\r\n}\r\n\r\nexport default DisplayCount","import React, {useState, useEffect} from 'react'\r\n\r\nimport {apiProfileDetail, apiProfileFollowToggle} from '../lookup'\r\nimport {UserDisplay, UserPicture} from './components'\r\nimport {DisplayCount} from './utils'\r\n\r\n\r\nfunction ProfileBadge({user, didFollowToggle, profileLoading}) {\r\n    let currentButtonText = (user && user.is_followed) ? 'Unfollow' : 'Follow'\r\n    currentButtonText = profileLoading ? 'Loading...' : currentButtonText\r\n    const handleFollowToggle = (event) => {\r\n        event.preventDefault()\r\n        if (didFollowToggle && !profileLoading) {\r\n            didFollowToggle(currentButtonText)\r\n        }\r\n    }\r\n\r\n    return user ? (\r\n        <div>\r\n            <p><UserPicture user={user} />&nbsp;\r\n            <UserDisplay user={user} includeFullName /></p>\r\n            <p className='small'>{user.country}</p>\r\n            <p className='small'>Followers: <DisplayCount>{user.follower_count}</DisplayCount></p>\r\n            <p className='small'>Following: <DisplayCount>{user.following_count}</DisplayCount></p>\r\n            <p className='small'>{user.bio}</p>\r\n            <button onClick={handleFollowToggle} className='btn btn-sm btn-dark'>\r\n                {currentButtonText}\r\n            </button>\r\n        </div>\r\n    ) : null\r\n}\r\n\r\nexport function ProfileBadgeComponent({username}) {\r\n    const [didLookup, setDidLookup] = useState(false)\r\n    const [profile, setProfile] = useState(null)\r\n    const [profileLoading, setProfileLoading] = useState(false)\r\n  \r\n    const handleBackendLookup = (response, status) => {\r\n      if (status === 200) {\r\n        setProfile(response)\r\n      }\r\n    }\r\n  \r\n    useEffect(() => {\r\n      if (didLookup === false) {\r\n        apiProfileDetail(username, handleBackendLookup)\r\n        setDidLookup(true)\r\n      }\r\n  \r\n    }, [didLookup, setDidLookup, username])\r\n\r\n    const handleNewFollow = (actionVerb) => {\r\n        setProfileLoading(true)\r\n        apiProfileFollowToggle(username, (response, status) => {\r\n            if (status === 200) {\r\n                console.log(response, status)\r\n                setProfile(response)\r\n            }\r\n            setProfileLoading(false)\r\n        }, actionVerb)\r\n    }\r\n\r\n    return !didLookup ? 'Loading...' : profile ?\r\n        <ProfileBadge user={profile} didFollowToggle={handleNewFollow} profileLoading={profileLoading} />\r\n        : null\r\n}\r\n\r\nexport default ProfileBadgeComponent\r\n\r\n","import {React, useState} from 'react'\r\nimport ActionButton from './buttons'\r\nimport {UserPicture, UserDisplay} from '../profiles'\r\n\r\nfunction Fillet({fillet, handleRepost}) {\r\n    const text = fillet.text ? fillet.text : ''\r\n    const filletDisplayPostfix  = fillet.text ? ' said:' : ' reposted:'\r\n    const [currentFillet, setCurrentFillet] = useState(fillet ? fillet : null)\r\n    const path = window.location.pathname\r\n    const match = path.match(/(?<filletId>\\d+)/)\r\n    const urlFilletId = match ? match.groups.filletId : 0\r\n    const isDetail = `${urlFilletId}` === `${fillet.id}`\r\n  \r\n    const handlePerformAction = (newFillet, status) => {\r\n      if (status === 200) {\r\n        setCurrentFillet(newFillet)\r\n      } else if (status === 201) {\r\n        handleRepost(newFillet)\r\n      }\r\n    }\r\n  \r\n    const handleLink = (event) => {\r\n      event.preventDefault()\r\n      window.location.href = `/${fillet.id}`\r\n    }\r\n\r\n    return (\r\n      <div className='col-12 col-md-10 mx-auto py-2'>\r\n        <div className='px-3 text-muted small'>\r\n          <UserPicture user={fillet.user}></UserPicture>&nbsp;\r\n          <UserDisplay user={fillet.user} includeFullName></UserDisplay>{filletDisplayPostfix}\r\n        </div>\r\n        { fillet.text !== '' && <p className='px-3 mb-0 py-2'>\r\n          <b>{text}</b>\r\n        </p>}\r\n        {fillet.is_repost &&\r\n        <div className='col-10'><Fillet fillet={currentFillet.parent} handleRepost={handleRepost}/></div>}\r\n        {currentFillet && <div className='btn btn-group'>\r\n          <ActionButton\r\n            fillet={currentFillet}\r\n            action={{type: 'like', display: 'Likes'}}\r\n            handlePerformAction={handlePerformAction}\r\n            theme='btn-dark'\r\n          />\r\n          <ActionButton\r\n            fillet={currentFillet}\r\n            action={{type: 'unlike', display: 'Unlike'}}\r\n            handlePerformAction={handlePerformAction}\r\n            theme='btn-dark'\r\n          />\r\n          <ActionButton\r\n            fillet={currentFillet}\r\n            action={{type: 'repost', display: 'Repost'}}\r\n            handlePerformAction={handlePerformAction}\r\n            theme='btn-light'\r\n          />\r\n          {!isDetail && <button onClick={handleLink} className='btn btn-outline-primary btn-sm btn-light'>View</button>}\r\n        </div>}\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default Fillet","import React, {useEffect, useState} from 'react'\r\nimport {apiFilletList} from '../lookup'\r\nimport Fillet from './detail'\r\n\r\nfunction FilletList({newFillets, setNewFillets, username}) {\r\n    const [fillets, setFillets] = useState([])\r\n    const [filletsInit, setFilletsInit] = useState(newFillets ? newFillets : [])\r\n    const [filletsDidSet, setFilletsDidSet] = useState(false)\r\n    const [nextUrl, setNextUrl] = useState(null)\r\n    \r\n    useEffect(() => {\r\n      let finalFillets = [...newFillets].concat(filletsInit)\r\n      if (finalFillets.length !== fillets.length) {\r\n        setFillets(finalFillets)\r\n      }\r\n    }, [fillets, newFillets, filletsInit])\r\n  \r\n    useEffect(() => {\r\n      if (!filletsDidSet) {\r\n        const handleFilletListLookup = (response, status) => {\r\n          if (status === 200)\r\n          {\r\n            setNextUrl(response.next)\r\n            setFilletsInit(response.results)\r\n            setFilletsDidSet(true)\r\n          } else {\r\n            alert('You have error :-D')\r\n          }\r\n        }\r\n        apiFilletList(username, handleFilletListLookup)\r\n      }\r\n    }, [filletsInit, filletsDidSet, username])\r\n  \r\n    const handleRepost = (newFillet) => {\r\n      const tempNewFillets = [...newFillets]\r\n      tempNewFillets.unshift(newFillet)\r\n      setNewFillets(tempNewFillets)\r\n    }\r\n  \r\n    const handleLoadNext = (event) => {\r\n      event.preventDefault()\r\n      if (nextUrl !== null) {\r\n        const handleLoadNextReponse = (response, status) => {\r\n          if (status === 200)\r\n          {\r\n            setNextUrl(response.next)\r\n            const newFillets = [...fillets].concat(response.results)\r\n            setFillets(newFillets)\r\n            setFilletsInit(newFillets)\r\n          } else {\r\n            alert('You have error :-D')\r\n          }\r\n        }\r\n        apiFilletList(username, handleLoadNextReponse, nextUrl)\r\n      }\r\n    }\r\n\r\n    return (\r\n      <> \r\n        {fillets.map((x) => {\r\n          return <><Fillet \r\n          fillet={x}\r\n          handleRepost={handleRepost}\r\n          key={x.id} />\r\n          <hr></hr></>\r\n        })}\r\n        {nextUrl !== null &&\r\n        <button\r\n        onClick={handleLoadNext}\r\n        className='btn btn-outline-primary btn-sm btn-dark'>\r\n          More\r\n        </button>}\r\n      </>\r\n    )\r\n  }\r\n  \r\n\r\nexport default FilletList","import React, {useEffect, useState} from 'react'\r\nimport {apiFilletFeed} from '../lookup'\r\nimport Fillet from './detail'\r\n\r\nexport function FilletFeedList({newFillets, setNewFillets, username}) {\r\n    const [fillets, setFillets] = useState([])\r\n    const [filletsInit, setFilletsInit] = useState(newFillets ? newFillets : [])\r\n    const [filletsDidSet, setFilletsDidSet] = useState(false)\r\n    const [nextUrl, setNextUrl] = useState(null)\r\n    \r\n    useEffect(() => {\r\n      let finalFillets = [...newFillets].concat(filletsInit)\r\n      if (finalFillets.length !== fillets.length) {\r\n        setFillets(finalFillets)\r\n      }\r\n    }, [fillets, newFillets, filletsInit])\r\n  \r\n    useEffect(() => {\r\n      if (!filletsDidSet) {\r\n        const handleFilletListLookup = (response, status) => {\r\n          if (status === 200)\r\n          {\r\n            setNextUrl(response.next)\r\n            setFilletsInit(response.results)\r\n            setFilletsDidSet(true)\r\n          }\r\n        }\r\n        apiFilletFeed(handleFilletListLookup)\r\n      }\r\n    }, [filletsInit, filletsDidSet, username])\r\n  \r\n    const handleRepost = (newFillet) => {\r\n      const tempNewFillets = [...newFillets]\r\n      tempNewFillets.unshift(newFillet)\r\n      setNewFillets(tempNewFillets)\r\n    }\r\n  \r\n    const handleLoadNext = (event) => {\r\n      event.preventDefault()\r\n      if (nextUrl !== null) {\r\n        const handleLoadNextReponse = (response, status) => {\r\n          if (status === 200)\r\n          {\r\n            setNextUrl(response.next)\r\n            const newFillets = [...fillets].concat(response.results)\r\n            setFillets(newFillets)\r\n            setFilletsInit(newFillets)\r\n          } else {\r\n            alert('You have error :-D')\r\n          }\r\n        }\r\n        apiFilletFeed(handleLoadNextReponse, nextUrl)\r\n      }\r\n    }\r\n\r\n    return (\r\n      <> \r\n        {fillets.map((x) => {\r\n          return <><Fillet \r\n          fillet={x}\r\n          handleRepost={handleRepost}\r\n          key={x.id} />\r\n          <hr></hr></>\r\n        })}\r\n        {nextUrl !== null &&\r\n        <button\r\n        onClick={handleLoadNext}\r\n        className='btn btn-outline-primary btn-sm btn-dark'>\r\n          More\r\n        </button>}\r\n      </>\r\n    )\r\n  }\r\n  \r\n\r\nexport default FilletFeedList","import React from 'react'\r\nimport {apiFilletCreate} from '../lookup'\r\n\r\nfunction FilletCreateForm({newFillets, setNewFillets}) {\r\n    const textAreaRef = React.createRef()\r\n  \r\n    const handleSubmit = (event) => {\r\n      // api request\r\n      event.preventDefault()\r\n      const enteredText = textAreaRef.current.value\r\n      textAreaRef.current.value = ''\r\n      apiFilletCreate(enteredText, handleBackendUpdate)\r\n    }\r\n  \r\n    const handleBackendUpdate = (response, status) => {\r\n      console.log(response, status)\r\n      // api response handler\r\n      if (status === 201) {\r\n        const tempNewFillets = [...newFillets]\r\n        tempNewFillets.unshift(response)\r\n        setNewFillets(tempNewFillets)\r\n      } else {\r\n        alert('you have error :-D')\r\n      }\r\n    }\r\n  \r\n    return (\r\n      <form onSubmit={handleSubmit}>\r\n        <textarea className='form-control' required={true} ref={textAreaRef}>\r\n        </textarea>\r\n        <button type='submit' className='btn btn-outline-primary btn-sm my-3 btn-dark'>Post</button>\r\n      </form>\r\n    )\r\n  }\r\n\r\nexport default FilletCreateForm","import {React, useEffect, useState} from 'react'\r\nimport FilletList from './list'\r\nimport FilletFeedList from './feed'\r\nimport FilletCreateForm from './form'\r\nimport {apiFilletDetail} from '../lookup'\r\nimport Fillet from './detail'\r\n\r\n\r\nexport function FilletsComponent({username, userCanPost}) {\r\n  const [newFillets, setNewFillets] = useState([])\r\n  userCanPost = userCanPost === 'true' ? true : false\r\n\r\n  return (\r\n  <div className='col-12 mb-3'>\r\n      {userCanPost &&\r\n      <FilletCreateForm newFillets={newFillets} setNewFillets={setNewFillets} />}\r\n      <FilletList newFillets={newFillets} setNewFillets={setNewFillets} username={username} />\r\n  </div>\r\n  )\r\n}\r\n\r\nexport function FilletFeedComponent({username, userCanPost}) {\r\n  const [newFillets, setNewFillets] = useState([])\r\n  userCanPost = userCanPost === 'true' ? true : false\r\n\r\n  return (\r\n  <div className='col-12 mb-3'>\r\n      {userCanPost &&\r\n      <FilletCreateForm newFillets={newFillets} setNewFillets={setNewFillets} />}\r\n      <FilletFeedList newFillets={newFillets} setNewFillets={setNewFillets} username={username} />\r\n  </div>\r\n  )\r\n}\r\n\r\nexport function FilletDetailComponent({filletId}) {\r\n  const [didLookup, setDidLookup] = useState(false)\r\n  const [fillet, setFillet] = useState(null)\r\n\r\n  const handleBackendLookup = (response, status) => {\r\n    if (status === 200) {\r\n      setFillet(response)\r\n    } else {\r\n      alert('Error: could not find fillet.')\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (didLookup === false) {\r\n      apiFilletDetail(filletId, handleBackendLookup)\r\n      setDidLookup(true)\r\n    }\r\n\r\n  }, [didLookup, setDidLookup, filletId])\r\n\r\n  return fillet === null ? null : <Fillet fillet={fillet} handleRepost={() => {}}/>\r\n}\r\n\r\nexport default FilletsComponent","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport {FilletsComponent, FilletFeedComponent, FilletDetailComponent} from './fillets'\nimport {ProfileBadgeComponent} from './profiles'\n\nconst e = React.createElement\n\nconst herringElement = document.getElementById('herring')\nif (herringElement) {\n  ReactDOM.render(\n    e(FilletsComponent, herringElement.dataset), herringElement)\n}\n\nconst herringFeedElement = document.getElementById('herring-feed')\nif (herringFeedElement) {\n  ReactDOM.render(\n    e(FilletFeedComponent, herringFeedElement.dataset), herringFeedElement)\n}\n\nconst filletDetailElements = document.querySelectorAll('.herring-detail')\nfilletDetailElements.forEach(container => {\n  ReactDOM.render(\n    e(FilletDetailComponent, container.dataset), container)\n})\n\nconst profileBadgeElements = document.querySelectorAll('.herring-profile-badge')\nprofileBadgeElements.forEach(container => {\n  ReactDOM.render(\n    e(ProfileBadgeComponent, container.dataset), container)\n})"],"sourceRoot":""}