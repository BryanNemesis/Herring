{"version":3,"sources":["lookup/lookup.js","lookup/components.js","fillets/buttons.js","profiles/components.js","fillets/detail.js","fillets/list.js","fillets/feed.js","fillets/form.js","fillets/components.js","index.js"],"names":["getCookie","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","lookup","method","endpoint","callback","data","jsonData","JSON","stringify","xhr","XMLHttpRequest","url","responseType","open","setRequestHeader","csrftoken","sessionid","withCredentials","onload","status","response","detail","window","location","href","indexOf","onerror","e","send","apiFilletList","username","nextUrl","replace","apiFilletFeed","ActionButton","fillet","action","handlePerformAction","theme","likeCount","like_count","className","display","type","handleActionBackendEvent","onClick","event","preventDefault","filletId","id","apiFilletAction","UserLink","children","UserPicture","UserDisplay","user","includeFullName","nameDisplay","first_name","last_name","Fillet","handleRepost","text","filletDisplayPostfix","useState","currentFillet","setCurrentFillet","match","pathname","urlFilletId","groups","isDetail","newFillet","is_repost","parent","FilletList","newFillets","setNewFillets","fillets","setFillets","filletsInit","setFilletsInit","filletsDidSet","setFilletsDidSet","setNextUrl","useEffect","finalFillets","concat","next","results","alert","tempNewFillets","unshift","map","x","FilletFeedList","FilletCreateForm","textAreaRef","React","createRef","handleBackendUpdate","console","log","onSubmit","enteredText","current","value","required","ref","FilletsComponent","userCanPost","FilletDetailComponent","didLookup","setDidLookup","setFillet","handleBackendLookup","apiFilletDetail","createElement","herringElement","getElementById","ReactDOM","render","dataset","herringFeedElement","querySelectorAll","forEach","container"],"mappings":"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","file":"static/js/main.fdb53866.chunk.js","sourcesContent":["function getCookie(name) {\r\n  var cookieValue = null;\r\n  if (document.cookie && document.cookie !== '') {\r\n      var cookies = document.cookie.split(';');\r\n      for (var i = 0; i < cookies.length; i++) {\r\n          var cookie = cookies[i].trim();\r\n          // Does this cookie string begin with the name we want?\r\n          if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n              cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n              break;\r\n          }\r\n      }\r\n  }\r\n  return cookieValue;\r\n}\r\n\r\nfunction lookup(method, endpoint, callback, data) {\r\n    let jsonData\r\n    if (data) {\r\n      jsonData = JSON.stringify(data)\r\n    }\r\n    const xhr = new XMLHttpRequest()\r\n    const url = `http://localhost:8000/api${endpoint}`\r\n    xhr.responseType = 'json'\r\n    xhr.open(method, url)\r\n    xhr.setRequestHeader('Content-Type', 'application/json')\r\n    if (method === 'POST') {\r\n      const csrftoken = getCookie('csrftoken')\r\n      xhr.setRequestHeader('X-CSRFToken', csrftoken)\r\n      const sessionid = getCookie('sessionid')\r\n      xhr.setRequestHeader('X-SessionID', sessionid)\r\n      xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest')\r\n      xhr.withCredentials = true\r\n    }\r\n    xhr.onload = () => {\r\n      if (xhr.status === 403) {\r\n        if (xhr.response.detail === 'Authentication credentials were not provided.') {\r\n          if (window.location.href.indexOf('login') === -1) {\r\n            window.location.href = '/login?showLoginRequired=true'\r\n          }\r\n        }\r\n      }\r\n\r\n      callback(xhr.response, xhr.status)\r\n    }\r\n    xhr.onerror = (e) => {\r\n      callback({'message': 'Request failed'}, 400)\r\n    }\r\n    xhr.send(jsonData)\r\n  }\r\n\r\nexport default lookup","import lookup from './lookup'\r\n\r\nexport function apiFilletCreate(newFillet, callback) {\r\n  lookup('POST', '/fillets/create/', callback, {text: newFillet})\r\n}\r\n\r\nexport function apiFilletAction(filletId, action, callback) {\r\n  const data = {id: filletId, action: action}\r\n  lookup('POST', '/fillets/action/', callback, data)\r\n}\r\n\r\nexport function apiFilletList(username, callback, nextUrl) {\r\n  let endpoint = '/fillets'\r\n  if (username) {\r\n    endpoint += `/?username=${username}`\r\n  }\r\n  if (nextUrl) {\r\n    endpoint = nextUrl.replace('http://localhost:8000/api', '')\r\n  }\r\n  lookup('GET', endpoint, callback)\r\n}\r\n\r\nexport function apiFilletFeed(callback, nextUrl) {\r\n  let endpoint = '/fillets/feed'\r\n  if (nextUrl) {\r\n    endpoint = nextUrl.replace('http://localhost:8000/api', '')\r\n  }\r\n  lookup('GET', endpoint, callback)\r\n}\r\n\r\nexport function apiFilletDetail(filletId, callback) {\r\n  lookup('GET', `/fillets/${filletId}/`, callback)\r\n}\r\n\r\nexport default apiFilletList\r\n","import React from 'react';\r\nimport {apiFilletAction} from '../lookup'\r\n\r\nfunction ActionButton({fillet, action, handlePerformAction, theme}) {\r\n    const likeCount = fillet.like_count ? fillet.like_count : 0\r\n    const className = `btn btn-outline-primary btn-sm ${theme}`\r\n    const display = action.type === 'like' ? `${likeCount} ${action.display}` : action.display\r\n\r\n    const handleActionBackendEvent = (response, status) => {\r\n      if ((status === 200 || status === 201) && handlePerformAction) {\r\n        handlePerformAction(response, status)\r\n      }\r\n    }\r\n    const handleClick = (event) => {\r\n      event.preventDefault()\r\n      apiFilletAction(fillet.id, action.type, handleActionBackendEvent)\r\n    }\r\n  \r\n    return <button className={className} onClick={handleClick}>{display}</button>\r\n  }\r\n\r\nexport default ActionButton","import {React} from 'react'\r\n\r\nfunction UserLink({username, children}) {\r\n    const handleUserLink = (event) => {\r\n      event.preventDefault()\r\n      window.location.href = `/profiles/${username}`\r\n    }\r\n    return <span onClick={handleUserLink} className='pointer'>{children}</span>\r\n  }\r\n  \r\nexport function UserPicture({username}) {\r\n    return (\r\n        <UserLink username={username}>\r\n        <span className='p-1 rounded bg-dark text-white'>&nbsp;{username[0]}&nbsp;</span>\r\n        </UserLink>\r\n    )\r\n}\r\n\r\nexport function UserDisplay({user, includeFullName}) {\r\n    const nameDisplay = `${user.first_name} ${user.last_name}`\r\n    return (\r\n        <>\r\n        {includeFullName && <>{nameDisplay}&nbsp;</>}\r\n        <UserLink username={user.username}>\r\n            @<b>{user.username}</b>\r\n        </UserLink>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default UserDisplay","import {React, useState} from 'react'\r\nimport ActionButton from './buttons'\r\nimport {UserPicture, UserDisplay} from '../profiles'\r\n\r\nfunction Fillet({fillet, handleRepost}) {\r\n    const text = fillet.text ? fillet.text : ''\r\n    const filletDisplayPostfix  = fillet.text ? ' said:' : ' reposted:'\r\n    const [currentFillet, setCurrentFillet] = useState(fillet ? fillet : null)\r\n    const path = window.location.pathname\r\n    const match = path.match(/(?<filletId>\\d+)/)\r\n    const urlFilletId = match ? match.groups.filletId : 0\r\n    const isDetail = `${urlFilletId}` === `${fillet.id}`\r\n  \r\n    const handlePerformAction = (newFillet, status) => {\r\n      if (status === 200) {\r\n        setCurrentFillet(newFillet)\r\n      } else if (status === 201) {\r\n        handleRepost(newFillet)\r\n      }\r\n    }\r\n  \r\n    const handleLink = (event) => {\r\n      event.preventDefault()\r\n      window.location.href = `/${fillet.id}`\r\n    }\r\n\r\n    return (\r\n      <div className='col-12 col-md-10 mx-auto border rounded py-2 mb-2'>\r\n        <div className='p-3 text-muted small'>\r\n          <UserPicture username={fillet.user.username}></UserPicture>&nbsp;\r\n          <UserDisplay user={fillet.user} includeFullName></UserDisplay>{filletDisplayPostfix}\r\n        </div>\r\n        <p className='px-4'>\r\n          <b>{text}</b>\r\n        </p>\r\n        {fillet.is_repost &&\r\n        <div className='col-9'><Fillet fillet={currentFillet.parent} handleRepost={handleRepost}/></div>}\r\n        {currentFillet && <div className='btn btn-group'>\r\n          <ActionButton\r\n            fillet={currentFillet}\r\n            action={{type: 'like', display: 'Likes'}}\r\n            handlePerformAction={handlePerformAction}\r\n            theme='btn-dark'\r\n          />\r\n          <ActionButton\r\n            fillet={currentFillet}\r\n            action={{type: 'unlike', display: 'Unlike'}}\r\n            handlePerformAction={handlePerformAction}\r\n            theme='btn-dark'\r\n          />\r\n          <ActionButton\r\n            fillet={currentFillet}\r\n            action={{type: 'repost', display: 'Repost'}}\r\n            handlePerformAction={handlePerformAction}\r\n            theme='btn-light'\r\n          />\r\n          {!isDetail && <button onClick={handleLink} className='btn btn-outline-primary btn-sm btn-light'>View</button>}\r\n        </div>}\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default Fillet","import React, {useEffect, useState} from 'react'\r\nimport {apiFilletList} from '../lookup'\r\nimport Fillet from './detail'\r\n\r\nfunction FilletList({newFillets, setNewFillets, username}) {\r\n    const [fillets, setFillets] = useState([])\r\n    const [filletsInit, setFilletsInit] = useState(newFillets ? newFillets : [])\r\n    const [filletsDidSet, setFilletsDidSet] = useState(false)\r\n    const [nextUrl, setNextUrl] = useState(null)\r\n    \r\n    useEffect(() => {\r\n      let finalFillets = [...newFillets].concat(filletsInit)\r\n      if (finalFillets.length !== fillets.length) {\r\n        setFillets(finalFillets)\r\n      }\r\n    }, [fillets, newFillets, filletsInit])\r\n  \r\n    useEffect(() => {\r\n      if (!filletsDidSet) {\r\n        const handleFilletListLookup = (response, status) => {\r\n          if (status === 200)\r\n          {\r\n            setNextUrl(response.next)\r\n            setFilletsInit(response.results)\r\n            setFilletsDidSet(true)\r\n          } else {\r\n            alert('You have error :-D')\r\n          }\r\n        }\r\n        apiFilletList(username, handleFilletListLookup)\r\n      }\r\n    }, [filletsInit, filletsDidSet, username])\r\n  \r\n    const handleRepost = (newFillet) => {\r\n      const tempNewFillets = [...newFillets]\r\n      tempNewFillets.unshift(newFillet)\r\n      setNewFillets(tempNewFillets)\r\n    }\r\n  \r\n    const handleLoadNext = (event) => {\r\n      event.preventDefault()\r\n      if (nextUrl !== null) {\r\n        const handleLoadNextReponse = (response, status) => {\r\n          if (status === 200)\r\n          {\r\n            setNextUrl(response.next)\r\n            const newFillets = [...fillets].concat(response.results)\r\n            setFillets(newFillets)\r\n            setFilletsInit(newFillets)\r\n          } else {\r\n            alert('You have error :-D')\r\n          }\r\n        }\r\n        apiFilletList(username, handleLoadNextReponse, nextUrl)\r\n      }\r\n    }\r\n\r\n    return (\r\n      <> \r\n        {fillets.map((x) => {\r\n          return <Fillet \r\n          fillet={x}\r\n          handleRepost={handleRepost}\r\n          key={x.id} />\r\n        })}\r\n        {nextUrl !== null &&\r\n        <button\r\n        onClick={handleLoadNext}\r\n        className='btn btn-outline-primary btn-sm btn-dark'>\r\n          More\r\n        </button>}\r\n      </>\r\n    )\r\n  }\r\n  \r\n\r\nexport default FilletList","import React, {useEffect, useState} from 'react'\r\nimport {apiFilletFeed} from '../lookup'\r\nimport Fillet from './detail'\r\n\r\nexport function FilletFeedList({newFillets, setNewFillets, username}) {\r\n    const [fillets, setFillets] = useState([])\r\n    const [filletsInit, setFilletsInit] = useState(newFillets ? newFillets : [])\r\n    const [filletsDidSet, setFilletsDidSet] = useState(false)\r\n    const [nextUrl, setNextUrl] = useState(null)\r\n    \r\n    useEffect(() => {\r\n      let finalFillets = [...newFillets].concat(filletsInit)\r\n      if (finalFillets.length !== fillets.length) {\r\n        setFillets(finalFillets)\r\n      }\r\n    }, [fillets, newFillets, filletsInit])\r\n  \r\n    useEffect(() => {\r\n      if (!filletsDidSet) {\r\n        const handleFilletListLookup = (response, status) => {\r\n          if (status === 200)\r\n          {\r\n            setNextUrl(response.next)\r\n            setFilletsInit(response.results)\r\n            setFilletsDidSet(true)\r\n          }\r\n        }\r\n        apiFilletFeed(handleFilletListLookup)\r\n      }\r\n    }, [filletsInit, filletsDidSet, username])\r\n  \r\n    const handleRepost = (newFillet) => {\r\n      const tempNewFillets = [...newFillets]\r\n      tempNewFillets.unshift(newFillet)\r\n      setNewFillets(tempNewFillets)\r\n    }\r\n  \r\n    const handleLoadNext = (event) => {\r\n      event.preventDefault()\r\n      if (nextUrl !== null) {\r\n        const handleLoadNextReponse = (response, status) => {\r\n          if (status === 200)\r\n          {\r\n            setNextUrl(response.next)\r\n            const newFillets = [...fillets].concat(response.results)\r\n            setFillets(newFillets)\r\n            setFilletsInit(newFillets)\r\n          } else {\r\n            alert('You have error :-D')\r\n          }\r\n        }\r\n        apiFilletFeed(handleLoadNextReponse, nextUrl)\r\n      }\r\n    }\r\n\r\n    return (\r\n      <> \r\n        {fillets.map((x) => {\r\n          return <Fillet \r\n          fillet={x}\r\n          handleRepost={handleRepost}\r\n          key={x.id} />\r\n        })}\r\n        {nextUrl !== null &&\r\n        <button\r\n        onClick={handleLoadNext}\r\n        className='btn btn-outline-primary btn-sm btn-dark'>\r\n          More\r\n        </button>}\r\n      </>\r\n    )\r\n  }\r\n  \r\n\r\nexport default FilletFeedList","import React from 'react'\r\nimport {apiFilletCreate} from '../lookup'\r\n\r\nfunction FilletCreateForm({newFillets, setNewFillets}) {\r\n    const textAreaRef = React.createRef()\r\n  \r\n    const handleSubmit = (event) => {\r\n      // api request\r\n      event.preventDefault()\r\n      const enteredText = textAreaRef.current.value\r\n      textAreaRef.current.value = ''\r\n      apiFilletCreate(enteredText, handleBackendUpdate)\r\n    }\r\n  \r\n    const handleBackendUpdate = (response, status) => {\r\n      console.log(response, status)\r\n      // api response handler\r\n      if (status === 201) {\r\n        const tempNewFillets = [...newFillets]\r\n        tempNewFillets.unshift(response)\r\n        setNewFillets(tempNewFillets)\r\n      } else {\r\n        alert('you have error :-D')\r\n      }\r\n    }\r\n  \r\n    return (\r\n      <form onSubmit={handleSubmit}>\r\n        <textarea className='form-control' required={true} ref={textAreaRef}>\r\n        </textarea>\r\n        <button type='submit' className='btn btn-outline-primary btn-sm my-3 btn-dark'>Post</button>\r\n      </form>\r\n    )\r\n  }\r\n\r\nexport default FilletCreateForm","import {React, useEffect, useState} from 'react'\r\nimport FilletList from './list'\r\nimport FilletFeedList from './feed'\r\nimport FilletCreateForm from './form'\r\nimport {apiFilletDetail} from '../lookup'\r\nimport Fillet from './detail'\r\n\r\n\r\nexport function FilletsComponent({username, userCanPost}) {\r\n  const [newFillets, setNewFillets] = useState([])\r\n  userCanPost = userCanPost === 'true' ? true : false\r\n\r\n  return (\r\n  <div className='col-12 mb-3'>\r\n      {userCanPost &&\r\n      <FilletCreateForm newFillets={newFillets} setNewFillets={setNewFillets} />}\r\n      <FilletList newFillets={newFillets} setNewFillets={setNewFillets} username={username} />\r\n  </div>\r\n  )\r\n}\r\n\r\nexport function FilletFeedComponent({username, userCanPost}) {\r\n  const [newFillets, setNewFillets] = useState([])\r\n  userCanPost = userCanPost === 'true' ? true : false\r\n\r\n  return (\r\n  <div className='col-12 mb-3'>\r\n      {userCanPost &&\r\n      <FilletCreateForm newFillets={newFillets} setNewFillets={setNewFillets} />}\r\n      <FilletFeedList newFillets={newFillets} setNewFillets={setNewFillets} username={username} />\r\n  </div>\r\n  )\r\n}\r\n\r\nexport function FilletDetailComponent({filletId}) {\r\n  const [didLookup, setDidLookup] = useState(false)\r\n  const [fillet, setFillet] = useState(null)\r\n\r\n  const handleBackendLookup = (response, status) => {\r\n    if (status === 200) {\r\n      setFillet(response)\r\n    } else {\r\n      alert('Error: could not find fillet.')\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (didLookup === false) {\r\n      apiFilletDetail(filletId, handleBackendLookup)\r\n      setDidLookup(true)\r\n    }\r\n\r\n  }, [didLookup, setDidLookup, filletId])\r\n\r\n  return fillet === null ? null : <Fillet fillet={fillet} handleRepost={() => {}}/>\r\n}\r\n\r\nexport default FilletsComponent","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport {FilletsComponent, FilletFeedComponent, FilletDetailComponent} from './fillets'\n\nconst e = React.createElement\n\nconst herringElement = document.getElementById('herring')\nif (herringElement) {\n  ReactDOM.render(\n    e(FilletsComponent, herringElement.dataset), herringElement)\n}\n\nconst herringFeedElement = document.getElementById('herring-feed')\nif (herringFeedElement) {\n  ReactDOM.render(\n    e(FilletFeedComponent, herringFeedElement.dataset), herringFeedElement)\n}\n\nconst filletDetailElements = document.querySelectorAll('.herring-detail')\nfilletDetailElements.forEach(container => {\n  ReactDOM.render(\n    e(FilletDetailComponent, container.dataset), container)\n})\n"],"sourceRoot":""}